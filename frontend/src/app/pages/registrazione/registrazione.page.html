<ion-content class="registrazione-page">

  <div class="registrazione-container">

    <!-- LOGO -->
    <div class="logo-container">
      <img src="assets/icon/logo.png" alt="Logo MyStudyPlanner" class="logo-image-small">
      <h1>MyStudyPlanner</h1>
    </div>

    <form class="form-wrapper" (ngSubmit)="registrazione()">

      <!-- USERNAME -->
      <ion-item [class.error]="submitted && !isValidUsername(username)">
        <ion-label position="floating">Username</ion-label>
        <ion-input [(ngModel)]="username" name="username"></ion-input>
      </ion-item>

      <!-- EMAIL -->
      <ion-item [class.error]="submitted && !isValidEmailDomain(email)">
        <ion-label position="floating">Email</ion-label>
        <ion-input type="email" [(ngModel)]="email" name="email"></ion-input>
      </ion-item>

      <!-- PASSWORD -->
      <div class="password-wrapper">
        <ion-item [class.error]="submitted && !isValidPassword(password)">
          <ion-label position="floating">Password</ion-label>
          <ion-input
            [type]="showPassword ? 'text' : 'password'"
            [(ngModel)]="password"
            name="password"
            (ionFocus)="onPasswordFocus()"
            (ionBlur)="onPasswordBlur()">
          </ion-input>
          <ion-icon
            slot="end"
            [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
            (click)="showPassword = !showPassword">
          </ion-icon>
        </ion-item>

        <!-- BOX REGOLE PASSWORD -->
        <div class="password-rules" [class.show]="showRules">
          <p [class.valid]="hasMinLength">• Minimo 8 caratteri</p>
          <p [class.valid]="hasUpper">• Una lettera maiuscola</p>
          <p [class.valid]="hasLower">• Una lettera minuscola</p>
          <p [class.valid]="hasNumber">• Un numero</p>
          <p [class.valid]="hasSpecial">• Un simbolo</p>
        </div>
      </div>

      <!-- CONFERMA PASSWORD -->
      <ion-item [class.error]="submitted && password !== confirmPassword">
        <ion-label position="floating">Conferma Password</ion-label>
        <ion-input
          [type]="showConfirmPassword ? 'text' : 'password'"
          [(ngModel)]="confirmPassword"
          name="confirmPassword">
        </ion-input>
        <ion-icon
          slot="end"
          [name]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'"
          (click)="showConfirmPassword = !showConfirmPassword">
        </ion-icon>
      </ion-item>

      <!-- BOTTONE REGISTRAZIONE + GOOGLE -->
      <div class="button-row">
        <ion-button type="submit" class="registrazione-btn">
          Registrati
        </ion-button>
        
        <ion-button type="button" class="google-btn">
          <img src="assets/icon/google-logo.png" alt="Google" class="google-icon">
          Google
        </ion-button>
      </div>


      <!-- LINK LOGIN -->
      <div class="back-to-login" (click)="vaiAlLogin()">
        Hai già un account? <span>Accedi</span>
      </div>

    </form>

  </div>

</ion-content>
